(this["webpackJsonpfrontify-colors-react-aws"]=this["webpackJsonpfrontify-colors-react-aws"]||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(10),c=n.n(o),i=(n(16),n(3)),l=n(0),d=function(){return Object(l.jsx)("footer",{className:"pb-12",children:Object(l.jsx)("div",{className:"max-w-[900px] mx-auto px-8",children:Object(l.jsx)("div",{children:Object(l.jsx)("span",{className:"text-xs text-gray-400",children:"Rudimentary clone of Fronity Color Palette component by Michael Ray-Von"})})})})},s=function(e){var t=e.children;return Object(l.jsxs)("div",{className:"overflow-x-hidden flex flex-col min-h-screen","data-testid":"layout",children:[Object(l.jsx)("main",{className:"flex-grow",children:t}),Object(l.jsx)(d,{})]})},u=n(11),f=n(7),b=n(2),p=n(5),j=n.n(p),x=n(8);function h(){return v.apply(this,arguments)}function v(){return(v=Object(x.a)(j.a.mark((function e(){var t,n,r,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m={name:"Black",hex:"#000000",rgb:"0,0,0"},O={title:"Colors",description:"",colors:[]};function g(){return Date.now().toString()}var y=Object(r.createContext)({palettes:[],colors:[],addColor:function(){},addPalette:function(){},changeColor:function(){},updateColor:function(){},deleteColor:function(){},handleDroppedColor:function(){},changeTitle:function(){},updateTitle:function(){},deletePalette:function(){},loading:!0}),w=function(e){var t=e.children,n=Object(r.useState)([]),a=Object(i.a)(n,2),o=a[0],c=a[1],d=Object(r.useState)([]),s=Object(i.a)(d,2),p=s[0],v=s[1],w=Object(r.useState)(!0),C=Object(i.a)(w,2),N=C[0],I=C[1];Object(r.useEffect)((function(){k()}),[]);var k=function(){var e=Object(x.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("api/getData",{table:"colors"});case 3:return t=e.sent,v(t),e.next=7,h("api/getData",{table:"palettes"});case 7:(n=e.sent).length>0?c(n):D(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:return e.prev=14,I(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(Object(b.a)({},O),{},{id:g()});c((function(t){return[].concat(Object(f.a)(t),[e])})),h("api/addItem",{table:"palettes",item:e})};return Object(l.jsx)(y.Provider,{value:{palettes:o,colors:p,addColor:function(e){var t=o.find((function(t){return t.id===e})),n=g(),r=Object(b.a)(Object(b.a)({},m),{},{id:n,palette:e}),a=o.map((function(t){return t.id===e?Object(b.a)(Object(b.a)({},t),{},{colors:[].concat(Object(f.a)(t.colors),[n])}):t}));v((function(e){return[].concat(Object(f.a)(e),[r])})),c(a),h("api/addItem",{table:"colors",item:r}),h("api/updateItem",{table:"palettes",id:null===t||void 0===t?void 0:t.id,updates:[{key:"colors",value:[].concat(Object(f.a)((null===t||void 0===t?void 0:t.colors)||[]),[n])}]})},addPalette:D,changeColor:function(e,t){var n=function(e){var t=e.match(/.{1,2}/g);return!!t&&[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16)]}(t.slice(1)),r=Object(b.a)(Object(b.a)({},e),{},{name:"...",hex:t,rgb:n?n.toString():""});v((function(t){return t.map((function(t){return t.id===e.id?r:t}))}))},updateColor:function(e){var t=e;h("api/getName",{hex:e.hex.slice(1)}).then((function(n){if(null===n||void 0===n?void 0:n.colors)return t=Object(b.a)(Object(b.a)({},e),{},{name:n.colors[0].name}),v((function(n){return n.map((function(n){return n.id===e.id?t:n}))})),t;throw new Error})).then((function(t){return h("api/updateItem",{table:"colors",id:null===e||void 0===e?void 0:e.id,updates:[{key:"name",value:t.name},{key:"hex",value:t.hex},{key:"rgb",value:t.rgb}]})})).catch((function(e){return console.error(e),e}))},deleteColor:function(e,t){var n=o.find((function(e){return e.id===t})),r=null===n||void 0===n?void 0:n.colors.filter((function(t){return t!==e.id})),a=o.map((function(e){return e.id===t&&r?Object(b.a)(Object(b.a)({},e),{},{colors:r}):e})),i=p.filter((function(t){return t.id!==e.id}));v(i),c(a),h("api/deleteItem",{table:"colors",id:e.id}),h("api/updateItem",{table:"palettes",id:null===n||void 0===n?void 0:n.id,updates:[{key:"colors",value:i}]})},handleDroppedColor:function(e,t){if(e&&t){var n,r,a,i,l=o.map((function(o){var c=Object(b.a)({},o),l=o.colors.findIndex((function(t){return t===e.id})),d=o.colors.findIndex((function(e){return e===t.id}));return l>-1&&(c.colors[l]=t.id,n=o.id,a=c.colors),d>-1&&(c.colors[d]=e.id,r=o.id,i=c.colors),c}));c(l),h("api/updateItem",{table:"palettes",id:n,updates:[{key:"colors",value:a}]}),n!==r&&h("api/updateItem",{table:"palettes",id:r,updates:[{key:"colors",value:i}]})}},changeTitle:function(e,t){var n=e.currentTarget.value,r=o.map((function(e){return e.id===t?Object(b.a)(Object(b.a)({},e),{},{title:n}):e}));c(r)},updateTitle:function(e){h("api/updateItem",{table:"palettes",id:e.id,updates:[{key:"title",value:e.title}]})},deletePalette:function(e,t){var n=o.filter((function(t){return t.id!==e})),r=p.filter((function(e){return!t.includes(e.id)}));v(r),c(n);var a,i=Object(u.a)(t);try{for(i.s();!(a=i.n()).done;){h("api/deleteItem",{table:"colors",id:a.value})}}catch(l){i.e(l)}finally{i.f()}h("api/deleteItem",{table:"palettes",id:e})},loading:N},children:t})},C=function(){return Object(r.useContext)(y)},N=function(e){var t=e.paletteId,n=e.color,a=e.handleDrag,o=e.handleDrop,c=C(),d=c.changeColor,s=c.updateColor,u=c.deleteColor,f=Object(r.useState)(!1),b=Object(i.a)(f,2);b[0],b[1];return Object(l.jsxs)("div",{className:"flex flex-col text-center items-center py-4 w-32 relative h-[190px] hover-parent",id:n.id.toString(),draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:a,onDrop:o,children:[Object(l.jsx)("input",{className:"w-0 h-0 opacity-0 absolute left-0",type:"color",id:"color_".concat(n.id),name:"color_".concat(n.id),value:null===n||void 0===n?void 0:n.hex,onInput:function(e){d(n,e.target.value)},onBlur:function(e){s(n)}}),Object(l.jsx)("label",{className:"block w-24 h-24 rounded-full shadow-xl mb-4",style:{backgroundColor:null===n||void 0===n?void 0:n.hex,cursor:"move"},htmlFor:"color_".concat(n.id)}),Object(l.jsx)("div",{className:"hover-child absolute top-0 right-0 flex",children:Object(l.jsx)("button",{className:"text-gray-400 hover:text-black",onClick:function(e){e.preventDefault(),u(n,t)},children:"\u2715"})}),Object(l.jsxs)("div",{className:"text-xs flex flex-col justify-between flex-grow",children:[(null===n||void 0===n?void 0:n.name)&&Object(l.jsx)("div",{className:"flex-grow flex flex-col justify-center",children:Object(l.jsx)("span",{className:"mb-2 font-bold text-gray-800",children:n.name})}),Object(l.jsxs)("div",{className:"block",children:[(null===n||void 0===n?void 0:n.hex)&&Object(l.jsx)("div",{children:Object(l.jsx)("span",{className:"text-gray-500",children:n.hex})}),(null===n||void 0===n?void 0:n.rgb)&&Object(l.jsx)("div",{children:Object(l.jsxs)("span",{className:"text-gray-500",children:["rgb(",n.rgb,")"]})})]})]})]})},I=function(e){var t=e.paletteId,n=C().addColor;return Object(l.jsx)("div",{className:"pb-12 h-[190px]",children:Object(l.jsx)("button",{className:"m-4 w-24 h-24 rounded-full bg-gray-200 text-3xl font-bold text-gray-500 flex justify-center items-center shadow-xl",onClick:function(){return n(t)},children:"+"})})},k=function(e){var t,n=e.palette,r=e.handleDrag,a=e.handleDrop,o=C(),c=o.colors,i=o.changeTitle,d=o.updateTitle,s=o.deletePalette;return Object(l.jsxs)("div",{className:"mb-8 group",children:[Object(l.jsxs)("div",{className:"flex justify-between items-center",children:[Object(l.jsx)("input",{className:"border-0 border-b border-transparent text-xl font-bold px-0 focus:ring-transparent hover:border-gray-300 focus:border-gray-500 pb-1",value:n.title,type:"text",onChange:function(e){return i(e,n.id)},onBlur:function(){return d(n)}}),Object(l.jsx)("button",{className:"opacity-0 group-hover:opacity-100 py-1 px-2 rounded-lg bg-gray-400 hover:bg-gray-600 text-white",onClick:function(){return s(n.id,n.colors)},children:"Remove"})]}),Object(l.jsxs)("div",{className:"flex flex-wrap",children:[Object(l.jsx)("p",{children:n.description}),null===n||void 0===n||null===(t=n.colors)||void 0===t?void 0:t.map((function(e){var t=c.find((function(t){return t.id===e}));if(t)return Object(l.jsx)(N,{paletteId:n.id,color:t,handleDrag:r,handleDrop:a},"".concat(t.id))})),Object(l.jsx)(I,{paletteId:n.id})]})]})},D=function(){var e=C().addPalette;return Object(l.jsx)("div",{className:"pt-8",children:Object(l.jsx)("button",{className:"py-1 px-2 rounded-lg bg-gray-400 hover:bg-gray-600 text-white",onClick:e,children:"Add Palette"})})},T=function(){var e=C(),t=e.palettes,n=e.colors,a=e.handleDroppedColor,o=e.loading,c=Object(r.useState)(null),d=Object(i.a)(c,2),u=d[0],f=d[1],b=function(e){f(e.currentTarget.id)},p=function(e){var t=n.find((function(e){return e.id===u})),r=n.find((function(t){return t.id===e.currentTarget.id}));t&&r&&a(t,r)};return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(s,{children:Object(l.jsxs)("div",{className:"max-w-[900px] mx-auto py-20 px-8",children:[Object(l.jsx)("h1",{className:"text-3xl font-bold mb-12",children:"Color Palettes"}),o?Object(l.jsx)("div",{children:"Mixing colors..."}):Object(l.jsxs)("div",{children:[t.sort((function(e,t){return e&&t&&e.id&&t.id?new Date(parseInt(e.id)).getTime()-new Date(parseInt(t.id)).getTime():0})).map((function(e,t){return Object(l.jsx)(k,{palette:e,handleDrag:b,handleDrop:p},e.id)})),Object(l.jsx)(D,{})]})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(w,{children:Object(l.jsx)(T,{})})}),document.getElementById("root")),P()}},[[19,1,2]]]);
//# sourceMappingURL=main.a74910c9.chunk.js.map